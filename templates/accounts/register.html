{% extends 'base.html' %}

{% block title %}Register - EduVanta{% endblock %}

{% block extra_js %}
<script>
    // Animate form elements on page load
    document.addEventListener('DOMContentLoaded', function() {
        const formElements = document.querySelectorAll('.form-input-wrapper');
        formElements.forEach((element, index) => {
            setTimeout(() => {
                element.classList.add('animate-fade-in');
            }, 100 * index);
        });
    });

    // Password strength checker
    function checkPasswordStrength() {
        const password = document.getElementById('password1').value;
        const meter = document.getElementById('password-strength-meter');
        const text = document.getElementById('password-strength-text');
        
        // Reset if password is empty
        if (password === '') {
            meter.style.width = '0%';
            text.textContent = 'Password strength: Not set';
            return;
        }
        
        // Calculate strength
        let strength = 0;
        
        // Length check
        if (password.length >= 8) strength += 25;
        
        // Character variety checks
        if (/[A-Z]/.test(password)) strength += 25; // Uppercase
        if (/[0-9]/.test(password)) strength += 25; // Numbers
        if (/[^A-Za-z0-9]/.test(password)) strength += 25; // Special chars
        
        // Update meter and text
        meter.style.width = strength + '%';
        
        let strengthText = 'Weak';
        if (strength >= 75) strengthText = 'Strong';
        else if (strength >= 50) strengthText = 'Medium';
        
        text.textContent = 'Password strength: ' + strengthText;
        
        // Check if passwords match
        checkPasswordMatch();
    }
    
    // Password match checker
    function checkPasswordMatch() {
        const password1 = document.getElementById('password1').value;
        const password2 = document.getElementById('password2').value;
        const matchText = document.getElementById('password-match-text');
        
        if (password2 === '') {
            matchText.classList.add('hidden');
            return;
        }
        
        if (password1 === password2) {
            matchText.textContent = 'Passwords match!';
            matchText.classList.remove('text-red-500');
            matchText.classList.add('text-green-500');
            matchText.classList.remove('hidden');
        } else {
            matchText.textContent = 'Passwords do not match';
            matchText.classList.remove('text-green-500');
            matchText.classList.add('text-red-500');
            matchText.classList.remove('hidden');
        }
    }
    
    // Filter subspecializations based on selected specializations
    function filterSubspecializations() {
        const specSelect = document.getElementById('specializations');
        if (!specSelect) return;
        const selectedSpecs = Array.from(specSelect.selectedOptions).map(o => o.value);
        const subspecSelect = document.getElementById('subspecializations');
        Array.from(subspecSelect.options).forEach(opt => {
            const specId = opt.getAttribute('data-spec');
            opt.hidden = selectedSpecs.length > 0 && !selectedSpecs.includes(specId);
        });
    }

    // Filter specializations by selected departments
    function filterSpecializations() {
        const deptSelect = document.getElementById('departments');
        if (!deptSelect) return;
        const selectedDepts = Array.from(deptSelect.selectedOptions).map(o => o.value);
        const specSelect = document.getElementById('specializations');
        Array.from(specSelect.options).forEach(opt => {
            const deptId = opt.getAttribute('data-dept');
            if (selectedDepts.length === 0) {
                opt.hidden = false;
            } else {
                opt.hidden = deptId && !selectedDepts.includes(deptId);
            }
        });
        filterSubspecializations();
    }

    // Role-based toggling of sections and helper text
    function toggleRoleSections() {
        const roleSelect = document.getElementById('role');
        const learningAreaBlocks = document.querySelectorAll('.learning-area-block');
        const childrenBlock = document.getElementById('children-block');
        const role = roleSelect ? roleSelect.value : 'student';
        const shouldShowAreas = role === 'student' || role === 'teacher';
        learningAreaBlocks.forEach(el => { el.style.display = shouldShowAreas ? '' : 'none'; });
        // Toggle children identifiers for Parents
        if (childrenBlock) childrenBlock.style.display = (role === 'parent') ? '' : 'none';
        // Update helper text (no learning/teaching phrasing)
        const helper = document.getElementById('role-helper');
        if (helper) {
            if (role === 'parent') {
                helper.textContent = 'Parents should link children before registration.';
            } else if (role === 'teacher') {
                helper.textContent = 'Teachers can review profile preferences after registration.';
            } else {
                helper.textContent = 'Students can review profile preferences after registration.';
            }
        }
    }

    // ---------------- Parent: Children chips input ----------------
    const childrenState = { items: [] };

    function renderChildrenChips() {
        const wrap = document.getElementById('children-chips');
        const hidden = document.getElementById('children-hidden');
        const err = document.getElementById('children-error');
        if (!wrap || !hidden) return;
        wrap.innerHTML = '';
        childrenState.items.forEach((val, idx) => {
            const chip = document.createElement('span');
            chip.className = 'chip';
            chip.innerHTML = `<i class="fas fa-user-graduate text-indigo-500 mr-1"></i>${val}<button type="button" class="chip-x" aria-label="Remove" onclick="removeChildChip(${idx})">&times;</button>`;
            wrap.appendChild(chip);
        });
        hidden.value = childrenState.items.join(',');
        if (err) err.classList.add('hidden');
    }

    function addChildChip() {
        const inp = document.getElementById('children-input');
        const err = document.getElementById('children-error');
        if (!inp) return;
        const raw = (inp.value || '').trim();
        if (!raw) return;
        // Split by commas or newline, sanitize, dedupe
        const parts = raw.split(/[\,\n]/).map(s => s.trim()).filter(Boolean);

        // Validators
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
        const idRegex = /^[A-Za-z0-9._-]{3,64}$/; // simple student ID rule

        const invalid = [];
        const valid = [];
        for (const p of parts) {
            if (emailRegex.test(p) || idRegex.test(p)) {
                if (!childrenState.items.includes(p) && !valid.includes(p)) valid.push(p);
            } else {
                invalid.push(p);
            }
        }

        if (invalid.length && err) {
            err.textContent = `Invalid entries: ${invalid.join(', ')}. Use valid email or ID (letters/numbers/dot/underscore/hyphen, 3-64 chars).`;
            err.classList.remove('hidden');
        } else if (err) {
            err.classList.add('hidden');
        }

        valid.forEach(v => childrenState.items.push(v));
        inp.value = '';
        renderChildrenChips();
    }

    function removeChildChip(idx) {
        childrenState.items.splice(idx, 1);
        renderChildrenChips();
    }

    document.addEventListener('DOMContentLoaded', function() {
        const specSelect = document.getElementById('specializations');
        if (specSelect) {
            specSelect.addEventListener('change', filterSubspecializations);
        }
        const deptSelect = document.getElementById('departments');
        if (deptSelect) {
            deptSelect.addEventListener('change', filterSpecializations);
        }
        const roleSelect = document.getElementById('role');
        if (roleSelect) {
            roleSelect.addEventListener('change', toggleRoleSections);
        }
        // Skip learning areas toggling
        const skip = document.getElementById('skip-areas');
        const areaSelects = [
          document.getElementById('departments'),
          document.getElementById('specializations'),
          document.getElementById('subspecializations')
        ];
        function applySkipState() {
          const disabled = !!(skip && skip.checked);
          areaSelects.forEach(s => { if (s) { s.disabled = disabled; s.classList.toggle('opacity-50', disabled); } });
        }
        if (skip) {
          skip.addEventListener('change', applySkipState);
        }
        
        // AJAX dependent dropdowns
        async function fetchSpecializations() {
          const selectedDepts = Array.from((document.getElementById('departments')||{}).selectedOptions||[]).map(o=>o.value).join(',');
          const url = selectedDepts ? (`{% url 'courses:api_specializations' %}` + `?dept_ids=${selectedDepts}`) : `{% url 'courses:api_specializations' %}`;
          const res = await fetch(url, { headers: { 'X-Requested-With': 'XMLHttpRequest' } });
          const data = await res.json();
          const specSel = document.getElementById('specializations');
          if (specSel) {
            const current = Array.from(specSel.selectedOptions).map(o=>o.value);
            specSel.innerHTML = '';
            data.results.forEach(s => {
              const opt = document.createElement('option');
              opt.value = s.id; opt.textContent = `${s.department_code} / ${s.name}`; opt.setAttribute('data-dept', s.department_id);
              if (current.includes(s.id)) opt.selected = true;
              specSel.appendChild(opt);
            });
          }
        }

        async function fetchSubspecializations() {
          const selectedSpecs = Array.from((document.getElementById('specializations')||{}).selectedOptions||[]).map(o=>o.value).join(',');
          const url = selectedSpecs ? (`{% url 'courses:api_subspecializations' %}` + `?spec_ids=${selectedSpecs}`) : `{% url 'courses:api_subspecializations' %}`;
          const res = await fetch(url, { headers: { 'X-Requested-With': 'XMLHttpRequest' } });
          const data = await res.json();
          const ssSel = document.getElementById('subspecializations');
          if (ssSel) {
            const current = Array.from(ssSel.selectedOptions).map(o=>o.value);
            ssSel.innerHTML = '';
            data.results.forEach(ss => {
              const opt = document.createElement('option');
              opt.value = ss.id; opt.textContent = `${ss.specialization_name} / ${ss.name}`; opt.setAttribute('data-spec', ss.specialization_id);
              if (current.includes(ss.id)) opt.selected = true;
              ssSel.appendChild(opt);
            });
          }
        }

        // Wire AJAX on change
        if (deptSelect) {
          deptSelect.addEventListener('change', async ()=>{ await fetchSpecializations(); await fetchSubspecializations(); });
        }
        if (specSelect) {
          specSelect.addEventListener('change', fetchSubspecializations);
        }

        // initial
        filterSpecializations(); // fallback filtering
        filterSubspecializations(); // fallback filtering
        fetchSpecializations().then(fetchSubspecializations);
        toggleRoleSections();
        applySkipState();
        // Initialize children chips from any prefilled data (optional)
        const hidden = document.getElementById('children-hidden');
        if (hidden && hidden.value) {
          hidden.value.split(',').map(s=>s.trim()).filter(Boolean).forEach(v=>childrenState.items.push(v));
          renderChildrenChips();
        }
    });
</script>
{% endblock %}

{% block extra_css %}
<style>
    /* Gradient backgrounds */
    .gradient-card {
        background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);
        border-radius: 1rem;
        transition: all 0.3s ease;
    }
    
    .gradient-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    /* XP Badge animations */
    .xp-badge {
        position: absolute;
        top: -10px;
        right: -10px;
        background: linear-gradient(135deg, #FBBF24 0%, #F59E0B 100%);
        color: #7C2D12;
        font-weight: bold;
        padding: 0.25rem 0.5rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        box-shadow: 0 10px 15px -3px rgba(251, 191, 36, 0.4);
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.05);
        }
        100% {
            transform: scale(1);
        }
    }
    
    /* Form field animations */
    .form-input-wrapper {
        position: relative;
        overflow: hidden;
    }
    
    .form-input-wrapper::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background: linear-gradient(90deg, #6366F1, #8B5CF6);
        transition: width 0.3s ease;
    }
    
    .form-input-wrapper:focus-within::after {
        width: 100%;
    }
    
    /* Social login buttons */
    .social-login-btn {
        transition: all 0.3s ease;
    }
    
    .social-login-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    
    /* Hero section */
    .auth-hero {
        background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    /* Chips */
    #children-chips { min-height: 2rem; }
    .chip { display: inline-flex; align-items: center; gap: .5rem; padding: .25rem .5rem; border: 1px solid #E5E7EB; background:#F9FAFB; color:#374151; border-radius:9999px; font-size:.75rem; }
    .chip-x { margin-left:.25rem; background: transparent; border:0; color:#6B7280; cursor:pointer; font-size: .9rem; }
    .chip-x:hover { color:#EF4444; }
    /* Registration simplification: hide learning areas in registration */
    .learning-area-block { display: none !important; }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8">
    <div class="sm:mx-auto sm:w-full sm:max-w-2xl">
        <div class="auth-hero text-center text-white">
            <h2 class="text-3xl font-extrabold">Join EduVanta Today!</h2>
            <p class="mt-2 text-sm text-indigo-100">
                Parents: you can link your children right here during signâ€‘up.
            </p>
            <div class="mt-4 inline-block relative">
                <span class="xp-badge">+25 XP</span>
                <p class="text-xs text-indigo-200">Registration Bonus</p>
            </div>
        </div>
    </div>

    <div class="mt-8 sm:mx-auto sm:w-full sm:max-w-2xl">
        <div class="gradient-card py-8 px-4 shadow sm:rounded-lg sm:px-10">
            <div class="bg-white bg-opacity-90 p-6 rounded-lg">
            <form class="space-y-6" action="{% url 'accounts:register' %}" method="POST">
                {% csrf_token %}
                {% if messages %}
                    {% for message in messages %}
                        <div class="rounded-md {% if message.tags == 'error' %}bg-red-50{% else %}bg-green-50{% endif %} p-4 mb-4">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    {% if message.tags == 'error' %}
                                        <svg class="h-5 w-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    {% else %}
                                        <svg class="h-5 w-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    {% endif %}
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm font-medium {% if message.tags == 'error' %}text-red-800{% else %}text-green-800{% endif %}">{{ message }}</p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}

                <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                    <div>
                        <label for="first_name" class="block text-sm font-medium text-gray-700">First name</label>
                        <div class="mt-1 form-input-wrapper">
                            <input type="text" name="first_name" id="first_name" autocomplete="given-name" required 
                                   class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                    </div>

                    <div>
                        <label for="last_name" class="block text-sm font-medium text-gray-700">Last name</label>
                        <div class="mt-1 form-input-wrapper">
                            <input type="text" name="last_name" id="last_name" autocomplete="family-name" required 
                                   class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                    </div>
                </div>

                <div>
                    <label for="username" class="block text-sm font-medium text-gray-700">Username</label>
                    <div class="mt-1 form-input-wrapper">
                        <input type="text" name="username" id="username" autocomplete="username" required 
                               class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                    </div>
                </div>

                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email address</label>
                    <div class="mt-1 form-input-wrapper">
                        <input type="email" name="email" id="email" autocomplete="email" required 
                               class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                    </div>
                </div>

                <div>
                    <label for="password1" class="block text-sm font-medium text-gray-700">Password</label>
                    <div class="mt-1 form-input-wrapper">
                        <input type="password" name="password1" id="password1" required oninput="checkPasswordStrength()" 
                               class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        <div class="mt-1 h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                            <div id="password-strength-meter" class="h-full w-0 transition-all duration-300 ease-in-out" style="background: linear-gradient(90deg, #EF4444 0%, #F59E0B 50%, #10B981 100%);"></div>
                        </div>
                        <p id="password-strength-text" class="mt-1 text-xs text-gray-500">Password strength: Not set</p>
                    </div>
                </div>

                <div>
                    <label for="password2" class="block text-sm font-medium text-gray-700">Confirm password</label>
                    <div class="mt-1 form-input-wrapper">
                        <input type="password" name="password2" id="password2" required oninput="checkPasswordMatch()" 
                               class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        <p id="password-match-text" class="mt-1 text-xs text-red-500 hidden">Passwords do not match</p>
                    </div>
                </div>

                <!-- Role selection moved above learning areas -->
                <div>
                    <label for="role" class="block text-sm font-medium text-gray-700">Role</label>
                    <div class="mt-1 form-input-wrapper">
                        <select name="role" id="role" required
                                class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                            <option value="student">Student</option>
                            <option value="teacher">Teacher</option>
                            <option value="parent">Parent</option>
                            {# Admin is created separately by platform; not selectable here #}
                        </select>
                    </div>
                </div>

                <!-- Helper: concise, role-aware -->
                <div id="role-helper" class="rounded-md bg-indigo-50 p-4 text-sm text-indigo-800">
                    If you choose the Parent role, you can link children later from your dashboard on the <a href="{% url 'accounts:parent_link_children' %}" class="underline">Link Children</a> page.
                </div>

                <div class="rounded-md bg-blue-50 p-4 text-sm text-blue-800">
                    After verifying your email, you can manage your profile and settings from your dashboard.
                </div>

                <div class="learning-area-block">
                    <label for="departments" class="block text-sm font-medium text-gray-700">Departments (you may select multiple)</label>
                    <div class="mt-1 form-input-wrapper">
                        <select name="departments" id="departments" multiple size="5"
                                class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                            {% for dept in departments %}
                                <option value="{{ dept.id }}">{{ dept.code }} / {{ dept.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <p class="mt-1 text-xs text-gray-500">Select all departments relevant to you. Specializations and courses are scoped by department.</p>
                </div>

                <div class="learning-area-block">
                    <label for="specializations" class="block text-sm font-medium text-gray-700">Specializations (you may select multiple)</label>
                    <div class="mt-1 form-input-wrapper">
                        <select name="specializations" id="specializations" multiple size="5"
                                class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                            {% for spec in specializations %}
                                <option value="{{ spec.id }}" data-dept="{{ spec.department.id }}">{{ spec.department.code }} / {{ spec.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div class="learning-area-block">
                    <label for="subspecializations" class="block text-sm font-medium text-gray-700">Sub-specializations (you may select multiple)</label>
                    <div class="mt-1 form-input-wrapper">
                        <select name="subspecializations" id="subspecializations" multiple size="6"
                                class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                            {% for ss in subspecializations %}
                                <option value="{{ ss.id }}" data-spec="{{ ss.specialization.id }}">{{ ss.specialization.name }} / {{ ss.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <p class="mt-1 text-xs text-gray-500">List is filtered by your selected specializations.</p>
                </div>

                <div class="flex items-center">
                    <input id="terms" name="terms" type="checkbox" required 
                           class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                    <label for="terms" class="ml-2 block text-sm text-gray-900">
                        I agree to the
                        <a href="/legal/terms/" class="font-medium text-indigo-600 hover:text-indigo-500">Terms and Conditions</a>
                        and
                        <a href="{% url 'privacy' %}" class="font-medium text-indigo-600 hover:text-indigo-500">Privacy Policy</a>
                    </label>
                </div>

                <div class="relative">
                    <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition transform hover:-translate-y-1">
                        Register
                    </button>
                    <span class="absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform rotate-12 bg-green-500 rounded-full animate-pulse">+25 XP</span>
                </div>
            </form>

            <div class="mt-6">
                    <p class="mt-2 text-center text-sm text-gray-600">
                        Or
                        <a href="{% url 'accounts:login' %}" class="font-medium text-indigo-600 hover:text-indigo-500">
                            sign in to your existing account
                        </a>
                    </p>
                    <div class="relative">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-300"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-2 bg-white text-gray-500">Or continue with</span>
                        </div>
                    </div>

                    <div class="mt-6 grid grid-cols-3 gap-3">
                        <div>
                            <a href="{% url 'social:begin' 'google-oauth2' %}" 
                               class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 social-login-btn">
                                <span class="sr-only">Sign up with Google</span>
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"></path>
                                </svg>
                            </a>
                        </div>

                        

                        <div>
                            <a href="{% url 'social:begin' 'github' %}" 
                               class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 social-login-btn">
                                <span class="sr-only">Sign up with GitHub</span>
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"></path>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
        </div>
    </div>
</div>
{% endblock %}
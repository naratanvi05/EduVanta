{% extends 'base.html' %}
{% block title %}Course Approvals | Admin{% endblock %}
{% block content %}
<div class="max-w-6xl mx-auto px-4 py-8">
  <h1 class="text-2xl font-bold mb-6">Pending/Rejected Courses</h1>
  <div class="bg-white rounded shadow overflow-hidden">
    <table class="min-w-full">
      <thead class="bg-gray-50 text-left text-xs font-semibold text-gray-600">
        <tr>
          <th class="px-4 py-3">Title</th>
          <th class="px-4 py-3">Instructor</th>
          <th class="px-4 py-3">Dept</th>
          <th class="px-4 py-3">Spec</th>
          <th class="px-4 py-3">Status</th>
          <th class="px-4 py-3">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y">
        {% for c in courses %}
        <tr>
          <td class="px-4 py-3">{{ c.title }}</td>
          <td class="px-4 py-3">{{ c.instructor.get_full_name|default:c.instructor.username }}</td>
          <td class="px-4 py-3">{{ c.department.code }}</td>
          <td class="px-4 py-3">{{ c.specialization.name }}</td>
          <td class="px-4 py-3">
            <span class="text-sm {% if c.approval_status == 'rejected' %}text-red-600{% else %}text-yellow-700{% endif %}">{{ c.approval_status|capfirst }}</span>
          </td>
          <td class="px-4 py-3 space-x-2">
            <form method="post" action="{% url 'courses:admin_approve_course' c.id %}" class="inline">
              {% csrf_token %}
              <button class="px-3 py-1 bg-green-600 text-white rounded">Approve</button>
            </form>
            <form method="post" action="{% url 'courses:admin_reject_course' c.id %}" class="inline">
              {% csrf_token %}
              <button class="px-3 py-1 bg-red-600 text-white rounded">Reject</button>
            </form>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="px-4 py-6 text-center text-gray-500">No pending or rejected courses.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
